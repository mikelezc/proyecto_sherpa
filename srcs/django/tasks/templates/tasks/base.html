<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>{% block title %}Task Management System{% endblock %}</title>

	<!-- Bootstrap CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">

	<!-- Custom CSS -->
	<style>
		.sidebar {
			min-height: 100vh;
			background-color: #f8f9fa;
			padding-top: 1rem;
		}

		.main-content {
			padding: 2rem;
		}

		.task-card {
			transition: transform 0.2s;
		}

		.task-card:hover {
			transform: translateY(-2px);
			box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
		}

		.priority-high {
			border-left: 4px solid #dc3545;
		}

		.priority-medium {
			border-left: 4px solid #ffc107;
		}

		.priority-low {
			border-left: 4px solid #28a745;
		}

		.priority-critical {
			border-left: 4px solid #6f42c1;
		}

		.status-todo {
			background-color: #f8f9fa;
		}

		.status-in_progress {
			background-color: #fff3cd;
		}

		.status-review {
			background-color: #d1ecf1;
		}

		.status-done {
			background-color: #d4edda;
		}
	</style>
</head>

<body>
	<!-- Navigation -->
	<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
		<div class="container-fluid">
			<a class="navbar-brand" href="{% url 'tasks_web:dashboard' %}">ðŸ“‹ Task Management</a>

			<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
				<span class="navbar-toggler-icon"></span>
			</button>

			<div class="collapse navbar-collapse" id="navbarNav">
				<ul class="navbar-nav me-auto">
					<li class="nav-item">
						<a class="nav-link" href="{% url 'tasks_web:dashboard' %}">Dashboard</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="{% url 'tasks_web:task_list' %}">All Tasks</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="{% url 'tasks_web:task_create' %}">Create Task</a>
					</li>
				</ul>

				<ul class="navbar-nav">
					{% if user.is_authenticated %}
					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
							data-bs-toggle="dropdown">
							ðŸ‘¤ {{ user.get_full_name|default:user.username }}
						</a>
						<ul class="dropdown-menu">
							<li><a class="dropdown-item" href="/admin/">Admin Panel</a></li>
							<li><a class="dropdown-item" href="{% url 'logout' %}">Logout</a></li>
						</ul>
					</li>
					{% else %}
					<li class="nav-item">
						<a class="nav-link" href="{% url 'login' %}">Login</a>
					</li>
					{% endif %}
				</ul>
			</div>
		</div>
	</nav>

	<!-- Main Content -->
	<div class="container-fluid">
		<div class="row">
			<!-- Sidebar (optional) -->
			{% block sidebar %}
			<nav class="col-md-3 col-lg-2 d-md-block sidebar collapse">
				<div class="position-sticky pt-3">
					<h6
						class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
						<span>Quick Actions</span>
					</h6>
					<ul class="nav flex-column">
						<li class="nav-item">
							<a class="nav-link" href="{% url 'tasks_web:task_create' %}">
								âž• New Task
							</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="{% url 'tasks_web:task_list' %}?assigned_to_me=on">
								ðŸ“‹ My Tasks
							</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="{% url 'tasks_web:task_list' %}?status=in_progress">
								ðŸ”„ In Progress
							</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="{% url 'tasks_web:task_list' %}?priority=high">
								ðŸ”¥ High Priority
							</a>
						</li>
					</ul>
				</div>
			</nav>
			{% endblock %}

			<!-- Main content area -->
			<main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
				{% if messages %}
				<div class="mt-3">
					{% for message in messages %}
					<div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
						{{ message }}
						<button type="button" class="btn-close" data-bs-dismiss="alert"></button>
					</div>
					{% endfor %}
				</div>
				{% endif %}

				<div class="main-content">
					{% block content %}
					<!-- Page content goes here -->
					{% endblock %}
				</div>
			</main>
		</div>
	</div>

	<!-- Bootstrap JS -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

	{% block extra_js %}
	<!-- Additional JavaScript can be added here -->
	{% endblock %}
</body>

</html>